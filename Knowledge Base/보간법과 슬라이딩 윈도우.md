## 보간법과 슬라이딩 윈도우

0. LAM 9600 데이터셋의 구성
(Wafer_ID, Time_Step, Label, Fault_Type, Time, Step Number, 센서 데이터들)

Wafer_ID: 개별 웨이퍼 ID
Time_Step: 개별 웨이퍼마다 Metal Etch 과정에서 진행되는 시간 단위 (공정 진행률: Time_Step마다 센서 데이터의 값이 다르다)
Label: 웨이퍼의 정상/불량


1. 전처리와 데이터 증강
전처리는 머신러닝 모델이 학습하기 용이하게 데이터셋을 변환시키는 과정이다. 주로 데이터의 범위를 통일시키는 것이 주요 목적이다.
현재 프로젝트에서 진행했었던 전처리는 보간법과 MinMax Scaling이 있다.

LAM 9600 Metal Etch Data는 각 Wafer_ID마다 Time_Step 총길이가 다르다. 어떤 데이터는 0~117까지 있고 0~97까지 있다.
그래서 LAM 9600 Metal Etch Data를 전처리하면 개별 Wafer_ID마다 Time_Step을 0~99로 통일시켜야 한다. 이러한 과정을 통해서 데이터셋을 다시 구성하여
머신러닝이나 딥러닝 모델에 학습하도록 한다.



2. 보간법 (Interpolation)

보간법(Interpolation)은 알고 있는 데이터 지점들(\(x_{i}\))을 기반으로 그 사이의 미지수 값(\(f(x)\))을 추정하여 함수 또는 궤적을 구성하는 수치 해석 기법이다. 
불연속적인 데이터를 통해 연속적인 곡선(근사 함수)을 만들어 중간 값을 예측하며, 선형 보간법, 스플라인 보간법 등이 대표적이다. 

- 데이터가 많 경우: 데이터를 압축하여 필요한 100개의 데이터만 선택함

- 데이터가 알맞게 있는 경우: 현상 유지

- 데이터가 적은 경우: 데이터의 관계를 기반으로 가상의 데이터를 생성함

보간법은 데이터의 크기를 통일시키기 위하여 기존 데이터를 사용하지 않거나 새로운 가상의 데이터를 생성하는 전처리 기법이다.

장점
- 모든 데이터를 근사치로 활용하여 사용할 수 있다.
- Time_Step에서 0부터 99까지의 각 센서 데이터 간의 차이를 비교할 수 있다.

단점
- 데이터가 생성되거나 없어지기 때문에 데이터의 신뢰성이 낮아질 수 있다.
- 현재 데이터셋에서 이러한 전처리를 적용하면 데이터셋의 양이 매우 적다. 이로 인하여 딥러닝의 성능이 매우 낮아질 수 있다.



2. Sliding Window

Sliding Window는 고정된 크기의 Window를 데이터에 따라 이동시키면서 각 윈도우 내의 데이터를 분석하는 기법이다. 이 방법을 통해
시간에 따른 데이터의 변화를 연속적으로 관찰할 수 있다.

0~110의 Time_Step을 가지는 데이터의 경우 (Window = 100)
- 첫 번째 Sequense: 0~99
- 두 번째 Sequense: 1~100
- 세 번째 Sequense: 2~101
- 네 번째 Sequense: 3~102
- 다섯 번째 Sequense: 4~103
~~~
- 10 번째 Sequense: 11~110

위 예시처럼 하나의 웨이퍼 데이터에서 총 10개의 시퀀스(윈도우 데이터)를 얻을 수 있다.
슬라이딩 윈도우는 윈도우에 따라 데이터를 나누어서 여러 시퀀스를 생성하여 데이터셋의 양을 늘리는 데이터 증강 기법이다

장점
- 데이터를 있는 그대로 사용할 수 있다. 그래서 어느 시점이건 0부터 99까지의 각 센서 데이터간의 관계를 파악하는데 용이하다.
- 데이터셋의 양을 더 많이 늘릴 수 있기 때문에 모델 학습에 용이하다.

단점
- 현 프로젝트에서 사용되는 코드의 경우 0부터 99까지의 길이가 되지 않는 데이터는 사용할 수 없다.
- 같은 Time_Step 간의 센서 데이터의 수치를 비교할 수 없다.



3. 본인의 생각

LAM 9600 Metal Etch Data에서 불량 웨이퍼는 특정 센서의 수치를 의도적으로 변경하여 생성되었다. 처음 1D-CAE을 구현하면서 모든 데이터의 Time_Step을 100으로 통일하도록 전처리하는 것이
중요하다고 생각했었다. 같은 Time_step의 센서 데이터끼리 비교하는 것이 정상/불량 웨이퍼를 분류하고 장비 이상을 확인할 수 있다고 생각했었다.

하지만 불량 웨이퍼는 특정 센서를 조절하여 의도적으로 불량을 일으키기 때문에 Time_Step 상의 센서 데이터 수치와는 별개로 정상과는 달리 센서 데이터의 변화에 차이가 있을 것이다.
그래서 Time_Step 상의 센서 데이터 (Point)에 주목하기 보다 센서 데이터의 변화(Line)에 집중하여 불량 웨이퍼를 탐지하는 것이 중요하다고 생각한다.



4. 현 프로젝트에서 모델 훈련에 적용할 것
전처리: MinMax Scaling만
데이터 증강: Sliding Window






















